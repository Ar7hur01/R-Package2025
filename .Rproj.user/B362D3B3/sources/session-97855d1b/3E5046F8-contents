install.packages("raster")
install.packages(c("terra", "RStoolbox", "sf", "dplyr"))
library(terra)
library(raster)
library(sf)

raster <- rast("C:/Users/AD/Downloads/16-12-24_Weststadt.tif")
plot(raster)

rasterValues <- getValues(raster)

#Classification for an sentinel 2 scene
coordinates <- crs(raster)
print(coordinates)

plotRGB(raster, r = 4, g = 3, b = 2, stretch = "lin")


# Load training data (shapefile with polygons representing land cover types)
training_data <- st_read("C:/Users/AD/Downloads/training_data.shp")

# Check the CRS of the Sentinel-2 data and the training data
crs_train <- crs(training_data)
head(crs_train)
crs_raster <- crs(raster)
head(crs_raster)

# Extract spectral values for each training polygon
training_spectral <- extract(raster, vect(training_data), df = TRUE)
head(training_spectral)

# Combine with the class labels
training_spectral <- cbind(training_spectral, training_data)
head(training_spectral)
colnames(training_spectral)[ncol(training_spectral)] <- "Class"
